<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é©—è­‰ç³»çµ±ç›£æ§ä¿®å¾©</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        .header {
            margin-bottom: 30px;
        }
        .header h1 {
            margin: 0;
            color: #333;
            font-size: 2.2em;
            font-weight: 300;
        }
        .header p {
            margin: 10px 0 0 0;
            color: #666;
            font-size: 1.1em;
        }
        .test-button {
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        .test-button:active {
            transform: translateY(0);
        }
        .result-box {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            text-align: left;
            min-height: 100px;
            transition: all 0.3s ease;
        }
        .result-success {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
        }
        .result-error {
            background: linear-gradient(135deg, #FF6B6B 0%, #C44569 100%);
            color: white;
        }
        .result-info {
            background: linear-gradient(135deg, #63b3ed 0%, #4299e1 100%);
            color: white;
        }
        .result-warning {
            background: linear-gradient(135deg, #FFA726 0%, #FF7043 100%);
            color: white;
        }
        .result-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        .result-content {
            font-size: 0.95em;
            line-height: 1.5;
        }
        .status-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        .loading {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        .code-block {
            background: rgba(0,0,0,0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            overflow-x: auto;
        }
        .fix-list {
            text-align: left;
            margin: 15px 0;
        }
        .fix-list li {
            margin: 8px 0;
            padding-left: 5px;
        }
        .success-animation {
            animation: successPulse 0.6s ease-in-out;
        }
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”§ ç³»çµ±ç›£æ§ä¿®å¾©é©—è­‰</h1>
            <p>é©—è­‰ç³»çµ±ç›£æ§æ¨¡çµ„çš„loggerå¼•ç”¨éŒ¯èª¤æ˜¯å¦å·²ä¿®å¾©</p>
        </div>
        
        <div>
            <button class="test-button" onclick="verifyLoggerFix()">ğŸ” é©—è­‰Loggerä¿®å¾©</button>
            <button class="test-button" onclick="testSystemMonitor()">ğŸ–¥ï¸ æ¸¬è©¦ç³»çµ±ç›£æ§</button>
            <button class="test-button" onclick="showFixSummary()">ğŸ“‹ é¡¯ç¤ºä¿®å¾©æ‘˜è¦</button>
        </div>
        
        <div id="result-box" class="result-box" style="display: none;">
            <div id="result-content"></div>
        </div>
    </div>

    <script>
        // ç³»çµ±ç›£æ§ä¿®å¾©é©—è­‰å™¨
        class SystemMonitorFixVerifier {
            constructor() {
                this.testResults = [];
                this.errors = [];
            }

            // é©—è­‰loggerå¼•ç”¨ä¿®å¾©
            verifyLoggerReferences() {
                console.log('ğŸ” é–‹å§‹é©—è­‰loggerå¼•ç”¨ä¿®å¾©...');
                
                try {
                    // æ¸¬è©¦1: æ­£ç¢ºçš„loggerä½¿ç”¨
                    const correctUsage = this.testCorrectLoggerUsage();
                    
                    // æ¸¬è©¦2: éŒ¯èª¤çš„loggerä½¿ç”¨ï¼ˆæ‡‰è©²æœƒå¤±æ•—ï¼‰
                    const incorrectUsage = this.testIncorrectLoggerUsage();
                    
                    // æ¸¬è©¦3: å¯¦éš›çš„ç³»çµ±ç›£æ§åŠŸèƒ½
                    const systemMonitor = this.testSystemMonitorFunctionality();
                    
                    return {
                        success: correctUsage && incorrectUsage && systemMonitor,
                        correctUsage,
                        incorrectUsage,
                        systemMonitor
                    };
                    
                } catch (error) {
                    console.error('âŒ Loggerå¼•ç”¨é©—è­‰éŒ¯èª¤:', error);
                    return { success: false, error: error.message };
                }
            }

            testCorrectLoggerUsage() {
                try {
                    // æ¨¡æ“¬æ­£ç¢ºçš„ç³»çµ±ç›£æ§é¡åˆ¥
                    class CorrectSystemMonitor {
                        constructor() {
                            this.logger = {
                                info: (msg, data) => console.log(`[INFO] ${msg}`, data || ''),
                                error: (msg, data) => console.error(`[ERROR] ${msg}`, data || ''),
                                warn: (msg, data) => console.warn(`[WARN] ${msg}`, data || '')
                            };
                        }

                        init() {
                            this.logger.info('ç³»çµ±ç›£æ§åˆå§‹åŒ–é–‹å§‹');
                            this.logger.info('ä½¿ç”¨æ­£ç¢ºçš„loggerå¼•ç”¨');
                            return true;
                        }

                        updateNetworkStatus() {
                            this.logger.info('æ›´æ–°ç¶²è·¯ç‹€æ…‹');
                            return true;
                        }

                        stopMonitoring() {
                            this.logger.info('ç³»çµ±ç›£æ§åœæ­¢');
                            return true;
                        }
                    }

                    const monitor = new CorrectSystemMonitor();
                    const result = monitor.init() && monitor.updateNetworkStatus() && monitor.stopMonitoring();
                    
                    console.log('âœ… æ­£ç¢ºloggerä½¿ç”¨æ¸¬è©¦é€šé');
                    return result;
                    
                } catch (error) {
                    console.error('âŒ æ­£ç¢ºloggerä½¿ç”¨æ¸¬è©¦å¤±æ•—:', error);
                    return false;
                }
            }

            testIncorrectLoggerUsage() {
                try {
                    // æ¨¡æ“¬éŒ¯èª¤çš„ç³»çµ±ç›£æ§é¡åˆ¥
                    class IncorrectSystemMonitor {
                        constructor() {
                            this.logger = {
                                info: (msg, data) => console.log(`[INFO] ${msg}`, data || '')
                            };
                        }

                        badMethod() {
                            try {
                                // é€™æ‡‰è©²æœƒå¤±æ•—ï¼Œå› ç‚ºsystemLoggeræœªå®šç¾©
                                systemLogger.info('é€™æœƒå°è‡´éŒ¯èª¤');
                                return false; // ä¸æ‡‰è©²åˆ°é”é€™è£¡
                            } catch (error) {
                                console.log('âœ… é æœŸçš„éŒ¯èª¤ç™¼ç”Ÿ:', error.message);
                                return true; // é€™æ˜¯æ­£ç¢ºçš„ï¼Œæ‡‰è©²ç™¼ç”ŸéŒ¯èª¤
                            }
                        }
                    }

                    const monitor = new IncorrectSystemMonitor();
                    const result = monitor.badMethod();
                    
                    console.log('âœ… éŒ¯èª¤loggerä½¿ç”¨æ¸¬è©¦é€šé');
                    return result;
                    
                } catch (error) {
                    console.error('âŒ éŒ¯èª¤loggerä½¿ç”¨æ¸¬è©¦å¤±æ•—:', error);
                    return false;
                }
            }

            testSystemMonitorFunctionality() {
                try {
                    // æ¸¬è©¦ç¶²è·¯ç‹€æ…‹
                    const isOnline = navigator.onLine;
                    console.log(`ç¶²è·¯ç‹€æ…‹: ${isOnline ? 'ç·šä¸Š' : 'é›¢ç·š'}`);
                    
                    // æ¸¬è©¦æœ¬åœ°å­˜å„²
                    const testKey = 'system_monitor_test';
                    localStorage.setItem(testKey, 'test_value');
                    const storedValue = localStorage.getItem(testKey);
                    localStorage.removeItem(testKey);
                    
                    if (storedValue === 'test_value') {
                        console.log('âœ… æœ¬åœ°å­˜å„²æ¸¬è©¦é€šé');
                    } else {
                        console.log('âŒ æœ¬åœ°å­˜å„²æ¸¬è©¦å¤±æ•—');
                        return false;
                    }
                    
                    // æ¸¬è©¦æ™‚é–“åŠŸèƒ½
                    const startTime = Date.now();
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    
                    console.log(`âœ… æ™‚é–“æ¸¬è©¦é€šé (å»¶é²: ${responseTime}ms)`);
                    return true;
                    
                } catch (error) {
                    console.error('âŒ ç³»çµ±ç›£æ§åŠŸèƒ½æ¸¬è©¦éŒ¯èª¤:', error);
                    return false;
                }
            }

            // ç²å–ä¿®å¾©æ‘˜è¦
            getFixSummary() {
                return {
                    issuesFixed: [
                        'ä¿®å¾© system-monitor.js ä¸­çš„ logger å¼•ç”¨éŒ¯èª¤',
                        'å°‡ systemLogger æ›¿æ›ç‚º this.logger',
                        'ä¿®å¾© init() æ–¹æ³•ä¸­çš„æ—¥èªŒè¨˜éŒ„',
                        'ä¿®å¾© updateNetworkStatus() ä¸­çš„éŒ¯èª¤è™•ç†',
                        'ä¿®å¾© stopMonitoring() ä¸­çš„æ¸…ç†é‚è¼¯'
                    ],
                    bestPractices: [
                        'å§‹çµ‚ä½¿ç”¨ this.logger è€Œä¸æ˜¯ systemLogger',
                        'ç¢ºä¿åœ¨é¡åˆ¥æ–¹æ³•ä¸­æ­£ç¢ºå¼•ç”¨ logger',
                        'åœ¨æ§‹é€ å‡½æ•¸ä¸­åˆå§‹åŒ– logger å¯¦ä¾‹',
                        'ä½¿ç”¨ä¸€è‡´çš„éŒ¯èª¤è™•ç†æ¨¡å¼',
                        'å®šæœŸæ¸¬è©¦æ—¥èªŒè¨˜éŒ„åŠŸèƒ½'
                    ],
                    commonMistakes: [
                        'ä½¿ç”¨æœªå®šç¾©çš„ systemLogger è®Šé‡',
                        'åœ¨éœæ…‹æ–¹æ³•ä¸­ä½¿ç”¨ this.logger',
                        'å¿˜è¨˜åœ¨æ§‹é€ å‡½æ•¸ä¸­åˆå§‹åŒ– logger',
                        'ä¸ä¸€è‡´çš„æ—¥èªŒç´šåˆ¥ä½¿ç”¨'
                    ]
                };
            }
        }

        // å‰µå»ºå…¨åŸŸé©—è­‰å™¨å¯¦ä¾‹
        const verifier = new SystemMonitorFixVerifier();
        window.SystemMonitorFixVerifier = SystemMonitorFixVerifier;
        window.monitorVerifier = verifier;

        // é©—è­‰Loggerä¿®å¾©
        window.verifyLoggerFix = function() {
            const resultBox = document.getElementById('result-box');
            const resultContent = document.getElementById('result-content');
            
            resultBox.className = 'result-box result-info loading';
            resultContent.innerHTML = `
                <div class="status-icon">ğŸ”</div>
                <div class="result-title">æ­£åœ¨é©—è­‰Loggerä¿®å¾©...</div>
                <div class="result-content">è«‹æŸ¥çœ‹æ§åˆ¶å°è¼¸å‡ºç²å–è©³ç´°ä¿¡æ¯</div>
            `;
            resultBox.style.display = 'block';
            
            setTimeout(() => {
                const result = verifier.verifyLoggerReferences();
                
                if (result.success) {
                    resultBox.className = 'result-box result-success success-animation';
                    resultContent.innerHTML = `
                        <div class="status-icon">âœ…</div>
                        <div class="result-title">Loggerä¿®å¾©é©—è­‰é€šéï¼</div>
                        <div class="result-content">
                            <p>æ‰€æœ‰loggerå¼•ç”¨éŒ¯èª¤éƒ½å·²æ­£ç¢ºä¿®å¾©ï¼š</p>
                            <ul class="fix-list">
                                <li>âœ… æ­£ç¢ºçš„loggerä½¿ç”¨æ–¹å¼æ¸¬è©¦é€šé</li>
                                <li>âœ… éŒ¯èª¤çš„loggerä½¿ç”¨æ–¹å¼å·²è­˜åˆ¥ä¸¦è™•ç†</li>
                                <li>âœ… ç³»çµ±ç›£æ§åŠŸèƒ½æ¸¬è©¦é€šé</li>
                            </ul>
                            <p>ç³»çµ±ç›£æ§æ¨¡çµ„ç¾åœ¨å¯ä»¥æ­£å¸¸è¨˜éŒ„æ—¥èªŒäº†ï¼</p>
                        </div>
                    `;
                } else {
                    resultBox.className = 'result-box result-error';
                    resultContent.innerHTML = `
                        <div class="status-icon">âŒ</div>
                        <div class="result-title">Loggerä¿®å¾©é©—è­‰å¤±æ•—</div>
                        <div class="result-content">
                            <p>ç™¼ç¾loggerå¼•ç”¨å•é¡Œï¼š</p>
                            <div class="code-block">${result.error || 'æœªçŸ¥éŒ¯èª¤'}</div>
                            <p>è«‹æª¢æŸ¥ç³»çµ±ç›£æ§æ¨¡çµ„ä¸­çš„loggerå¼•ç”¨ã€‚</p>
                        </div>
                    `;
                }
            }, 1000);
        };

        // æ¸¬è©¦ç³»çµ±ç›£æ§
        window.testSystemMonitor = function() {
            const resultBox = document.getElementById('result-box');
            const resultContent = document.getElementById('result-content');
            
            resultBox.className = 'result-box result-info loading';
            resultContent.innerHTML = `
                <div class="status-icon">ğŸ–¥ï¸</div>
                <div class="result-title">æ­£åœ¨æ¸¬è©¦ç³»çµ±ç›£æ§åŠŸèƒ½...</div>
                <div class="result-content">æ¸¬è©¦ç¶²è·¯é€£ç·šã€æœ¬åœ°å­˜å„²å’Œæ™‚é–“åŠŸèƒ½</div>
            `;
            resultBox.style.display = 'block';
            
            setTimeout(() => {
                const result = verifier.testSystemMonitorFunctionality();
                
                if (result) {
                    resultBox.className = 'result-box result-success success-animation';
                    resultContent.innerHTML = `
                        <div class="status-icon">âœ…</div>
                        <div class="result-title">ç³»çµ±ç›£æ§åŠŸèƒ½æ¸¬è©¦é€šéï¼</div>
                        <div class="result-content">
                            <p>æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½æ­£å¸¸é‹ä½œï¼š</p>
                            <ul class="fix-list">
                                <li>âœ… ç¶²è·¯é€£ç·šæª¢æŸ¥æ­£å¸¸</li>
                                <li>âœ… æœ¬åœ°å­˜å„²åŠŸèƒ½æ­£å¸¸</li>
                                <li>âœ… æ™‚é–“æ¸¬é‡åŠŸèƒ½æ­£å¸¸</li>
                                <li>âœ… éŒ¯èª¤è™•ç†æ©Ÿåˆ¶æ­£å¸¸</li>
                            </ul>
                            <p>ç³»çµ±ç›£æ§æ¨¡çµ„åŠŸèƒ½å®Œæ•´ï¼</p>
                        </div>
                    `;
                } else {
                    resultBox.className = 'result-box result-error';
                    resultContent.innerHTML = `
                        <div class="status-icon">âŒ</div>
                        <div class="result-title">ç³»çµ±ç›£æ§åŠŸèƒ½æ¸¬è©¦å¤±æ•—</div>
                        <div class="result-content">
                            <p>ç™¼ç¾ç³»çµ±ç›£æ§åŠŸèƒ½å•é¡Œ</p>
                            <p>è«‹æª¢æŸ¥æ§åˆ¶å°è¼¸å‡ºç²å–è©³ç´°éŒ¯èª¤ä¿¡æ¯ã€‚</p>
                        </div>
                    `;
                }
            }, 1500);
        };

        // é¡¯ç¤ºä¿®å¾©æ‘˜è¦
        window.showFixSummary = function() {
            const resultBox = document.getElementById('result-box');
            const resultContent = document.getElementById('result-content');
            const summary = verifier.getFixSummary();
            
            resultBox.className = 'result-box result-info';
            resultContent.innerHTML = `
                <div class="status-icon">ğŸ“‹</div>
                <div class="result-title">ç³»çµ±ç›£æ§ä¿®å¾©æ‘˜è¦</div>
                <div class="result-content">
                    <h4>ğŸ”§ å·²ä¿®å¾©çš„å•é¡Œï¼š</h4>
                    <ul class="fix-list">
                        ${summary.issuesFixed.map(issue => `<li>âœ… ${issue}</li>`).join('')}
                    </ul>
                    
                    <h4>ğŸ’¡ æœ€ä½³å¯¦è¸ï¼š</h4>
                    <ul class="fix-list">
                        ${summary.bestPractices.map(practice => `<li>ğŸ’ ${practice}</li>`).join('')}
                    </ul>
                    
                    <h4>âš ï¸ å¸¸è¦‹éŒ¯èª¤ï¼š</h4>
                    <ul class="fix-list">
                        ${summary.commonMistakes.map(mistake => `<li>ğŸš« ${mistake}</li>`).join('')}
                    </ul>
                </div>
            `;
            resultBox.style.display = 'block';
        };

        // é é¢è¼‰å…¥å®Œæˆæç¤º
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ ç³»çµ±ç›£æ§ä¿®å¾©é©—è­‰é é¢å·²è¼‰å…¥');
            console.log('ğŸ’¡ æç¤ºï¼šé»æ“ŠæŒ‰éˆ•é–‹å§‹é©—è­‰ç³»çµ±ç›£æ§ä¿®å¾©');
        });
    </script>
</body>
</html>