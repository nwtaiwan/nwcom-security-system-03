<header class="flex justify-between items-center mb-6 pb-4 border-b">
     <div class="flex items-center">
        <button id="menu-toggle-btn-users" class="md:hidden mr-4 p-2 text-gray-600 hover:text-gray-900">
             <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>
        <h1 class="text-xl font-bold text-gray-800">帳號管理</h1>
     </div>
     <button id="show-add-user-modal-btn" class="bg-red-600 text-white font-bold py-2 px-4 rounded-md hover:bg-red-700">新增帳號</button>
</header>

<!-- Sub Tabs for User Management -->
<div class="mb-6 border-b border-gray-200">
    <nav class="flex space-x-4" aria-label="Tabs">
        <button id="sub-tab-user-list" class="sub-tab-button active shrink-0 px-4 py-2 text-sm font-medium text-gray-500 rounded-t-lg border-b-2 border-transparent hover:text-gray-700 hover:border-gray-300">帳號列表</button>
        <button id="sub-tab-login-history" class="sub-tab-button shrink-0 px-4 py-2 text-sm font-medium text-gray-500 rounded-t-lg border-b-2 border-transparent hover:text-gray-700 hover:border-gray-300">登入紀錄</button>
    </nav>
</div>

<!-- Account List Content -->
<div id="account-list-content">
    <!-- Search and Filter Bar -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 bg-gray-50 rounded-lg">
        <div class="md:col-span-1">
            <label for="search-input" class="text-sm font-medium text-gray-700">搜尋</label>
            <input type="text" id="search-input" placeholder="姓名/編號/手機..." class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
        </div>
        <div>
            <label for="filter-job-title" class="text-sm font-medium text-gray-700">職稱</label>
            <select id="filter-job-title" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"></select>
        </div>
        <div>
            <label for="filter-certification" class="text-sm font-medium text-gray-700">專業證照</label>
            <select id="filter-certification" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"></select>
        </div>
         <div>
            <label for="filter-status" class="text-sm font-medium text-gray-700">狀況</label>
            <select id="filter-status" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                <option value="all">全部</option>
                <option value="在職">在職</option>
                <option value="非在職">非在職</option>
                <option value="離職">離職</option>
            </select>
        </div>
    </div>

    <div class="overflow-auto" style="max-height: calc(100vh - 340px);">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50 sticky top-0">
                <tr>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">大頭照</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">員工編號</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">姓名</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">職稱</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">手機號碼</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">專業證照</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">備註</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">狀況</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                </tr>
            </thead>
            <tbody id="users-list" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
    </div>
</div>

<!-- Login History Content -->
<div id="login-history-content" class="hidden">
     <div class="overflow-auto" style="max-height: calc(100vh - 220px);">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50 sticky top-0">
                <tr>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">登入日期時間</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">員工編號</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">姓名</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">狀況</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">登入裝置 ID</th>
                    <th class="px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">登出日期時間</th>
                </tr>
            </thead>
            <tbody id="login-history-list" class="bg-white divide-y divide-gray-200"></tbody>
        </table>
    </div>
</div>

<!-- Add/Edit User Modal -->
<div id="user-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
    <div class="relative top-10 mx-auto p-5 border w-full max-w-3xl shadow-lg rounded-md bg-white">
        <h3 id="user-modal-title" class="text-lg leading-6 font-medium text-gray-900 text-center mb-4">新增帳號</h3>
        <form id="user-form">
            <input type="hidden" id="user-id">
            <div class="max-h-[75vh] overflow-y-auto pr-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- Left Column -->
                    <div class="md:col-span-1">
                        <label class="block text-sm font-medium text-gray-700">大頭照</label>
                        <div class="mt-1 flex flex-col items-center">
                            <img id="profile-pic-preview" src="https://placehold.co/128x128/e2e8f0/4a5568?text=無照片" class="w-32 h-32 rounded-full object-cover mb-2" alt="大頭照預覽">
                            <input type="file" id="profile-pic" accept="image/*" class="text-sm">
                        </div>
                    </div>
                    <!-- Right Column -->
                    <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="employee-id" class="block text-sm font-medium text-gray-700">員工編號</label>
                            <input type="text" id="employee-id" required class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="full-name" class="block text-sm font-medium text-gray-700">姓名</label>
                            <input type="text" id="full-name" required class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                         <div>
                            <label for="username-modal" class="block text-sm font-medium text-gray-700">登入帳號</label>
                            <input type="text" id="username-modal" required class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="password-modal" class="block text-sm font-medium text-gray-700">登入密碼</label>
                            <input type="password" id="password-modal" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500" placeholder="留空則不修改">
                        </div>
                         <div>
                            <label for="phone-number" class="block text-sm font-medium text-gray-700">手機號碼</label>
                            <input type="tel" id="phone-number" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="id-card-number" class="block text-sm font-medium text-gray-700">身分證號</label>
                            <input type="text" id="id-card-number" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div class="md:col-span-2">
                            <label for="address" class="block text-sm font-medium text-gray-700">住址</label>
                            <input type="text" id="address" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="dob" class="block text-sm font-medium text-gray-700">出生年月日</label>
                            <input type="date" id="dob" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                        </div>
                        <div>
                            <label for="gender" class="block text-sm font-medium text-gray-700">性別</label>
                            <select id="gender" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                                <option value="未指定">未指定</option>
                                <option value="男性">男性</option>
                                <option value="女性">女性</option>
                            </select>
                        </div>
                         <div>
                            <label for="user-role" class="block text-sm font-medium text-gray-700">系統角色</label>
                            <select id="user-role" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                                <option value="staff">勤務人員</option>
                                <option value="junior_manager">初階主管</option>
                                <option value="senior_manager">高階主管</option>
                                <option value="system_admin">系統管理員</option>
                            </select>
                        </div>
                        <div>
                            <label for="job-title" class="block text-sm font-medium text-gray-700">職稱</label>
                            <select id="job-title" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"></select>
                        </div>
                         <div>
                            <label for="status" class="block text-sm font-medium text-gray-700">狀況</label>
                            <select id="status" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500">
                                <option value="在職">在職</option>
                                <option value="非在職">非在職</option>
                                <option value="離職">離職</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- Certifications and Remarks -->
                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">專業證照</label>
                        <div id="certifications-checkboxes" class="grid grid-cols-2 gap-2 max-h-40 overflow-y-auto p-2 border rounded-md">
                            <!-- Checkboxes will be dynamically inserted here -->
                        </div>
                    </div>
                    <div>
                        <label for="remarks" class="block text-sm font-medium text-gray-700">備註</label>
                        <textarea id="remarks" rows="5" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"></textarea>
                    </div>
                </div>
                 <div class="items-center px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse mt-4">
                     <button type="submit" id="save-user-btn" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">儲存</button>
                     <button type="button" id="cancel-user-modal-btn" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm">取消</button>
                 </div>
            </div>
        </form>
    </div>
</div>

